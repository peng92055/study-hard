# 从一个url到页面展示的全流程

## 浏览器接收URL 到 开启网络请求线程
  - 浏览器是多进程的，有一个主控进程，以及每一个tab页面会开启一个进程（某些情况下多tab会合并进程，比如打开多个空白页）
  - 每个tab页面可以看做是一个浏览器的渲染进程（内核进程），这个进程是多线程的
  - 一个进程分为5大类线程
    1. GUI渲染线程 
      - 负责浏览器渲染，如html、css解析，构建dom树和绘制树，布局和绘制等。
      - GUI线程与JS互斥，当JS引擎执行时，GUI线程就会被挂起，GUI的更新会保存在一个队列中等待JS引擎空闲时立即执行。
    2. JS引擎线程
      - 也称js内核，负责解析JS脚本并运行。
    3. 事件触发线程
      - 负责控制事件循环。当js引擎遇到异步任务（settimeout、promise、ajax等）时，就将这些任务添加到事件线程中，当对应的任务符合触发条件时，该线程会把事件添加到待处理的任务队列（Event Quene）的队尾，等待JS引擎处理。
    4. 定时器线程
      - 负责setTimeout和setInterval的线程。通过单独的线程来进行计时并触发才不会影响计时的准确，因为js引擎是单线程，如果处于阻塞状态就会影响计时的准确。
    5. 异步请求线程
      - 负责XMLHttpRequest请求的线程。当请求状态变更，就会将回调函数放入事件队列中等待JS引擎执行。
 - HTML5 新增web worker线程
    - 由JS引擎线程向浏览器发起申请一个独立线程，由主线程完全控制，但是不能操作dom。两个线程不会互相阻塞，只能通过postMessage来通信。通信的数据经过了序列化，传递的是值而不是引用，故而数据更改不会相互影响。
  
## 开启网络请求线程 到 发出一个完整的HTTP请求
## 服务器接收到请求 到 对应后台服务接收到请求
## 后台服务和前台应用的Http交互
## 浏览器接收http响应数据包后的解析
## css的可视化格式模型
## JS引擎解析过程
## 其他



- 扩展
  - 浏览器是多进程的，浏览器内核是多线程的，JS引擎是单线程的
  - 重排(因为是流式布局，也称回流)、重绘 [https://blog.csdn.net/lixiaosenlin/article/details/108262343]

- 参考
  - [https://zhuanlan.zhihu.com/p/34453198]
  - [https://zhuanlan.zhihu.com/p/80551769]