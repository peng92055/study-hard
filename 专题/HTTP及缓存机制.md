## HTTP
  - HTTP1.1协议（rfc规定的协议）
      - 基于TCP协议
      - 请求分为： 
        - 请求行（method,path,version) eg: POST /chapther/user.html HTTP/1.1
        - 请求头(accept,accept-encoding, accept-language,cache-control, connection,host,**if-modified-since**,**if-none-match**, user-agent, cookie)
        - 请求体,请求参数
          - application/json 
          - application/x-www-form-urlencoded 表单数据默认行为
          - multipart/form-data 上传文件常用
          - text/html
      - 响应与请求类似
        - 响应头（cache-control,connection, content-encoding, content-length, content-type, date, **etag**, expires, keep-alive, **last-modified**, server, set-cookie, via(服务端请求链路)）
      - HTTP status code
        - 1xx 临时回应，表示客户端继续，被浏览器http库直接处理
        - 2xx 请求成功系列 例如：200
        - 3xx 请求目标有变化，希望客户端进一步处理 301&302 304(**重点**)
        - 4xx 客户端请求错误 403无权限 404页面不存在
        - 5xx 服务端请求错误 500服务端错误 503服务端暂时性错误，可以一会再试
    - HTTPS协议
      - 使用加密通道来传输http的内容。首先与服务端建立TLS加密通道。
      - TLS构建于TCP协议之上
    - HTTP2.0 （1.1的升级）
      - 支持服务端推送， 可以在收到第一个请求到服务端时，提前将一部分内容推送给客户端放入缓存
      - 支持TCP连接复用， 可以把使用同一个tcp来传输多个http请求，避免tcp连接建立时的三次握手开销
## 浏览器缓存
- 强缓存（HTTP状态码返回200）
  - Pragma(优先级高于Cache-control) http1.0的标准
    - no-cache
  - Expires 设置缓存过期时间 1.0的标准
  - Cache-control http1.1的标准
    - no-store 所有内容都不缓存
    - no-cache 缓存，但是需要通过与服务器进行通信判断该资源是否为最新。若未过期，则返回304
    - max-age 设置缓存最大周期，时间是相对于请求的时间。(优先级高于expires)
    - public 可以被任何中间人缓存
    - private 中间人不能缓存此响应
  - 浏览器返回200状态有两种情况
    - from memory cache 从内存中获取，一般缓存更新频率较高的js、图片、字体等资源,当资源从内存中释放，就会从磁盘中获取。
    - from disk cache 从磁盘中过去，一般缓存更新频率较低的js、css等资源
- 协商缓存（HTTP状态码返回304）
  - Last-modified/If-Modified-Since
  - Etag/If-None-Match （优先级高）
- 优劣势
  - expires 
    - 时间有服务器发送，如果服务器和客户端时间存在不一致，可能出现问题。
    - 存在版本问题，到期之前的修改客户端是不可知的
  - cache-control
    - http1.1才能用，不适合1.0
    - 存在版本问题，到期之前的修改客户端是不可知的
  - last-modified
    - 只要资源修改，不论资源是否发生变化，例如周期性重写，都会导致无效更新
    - 以时间作为标识，只能精准到秒级别，无法判断1s内进行多次修改
    - 某些服务器不能精准得到文件最后修改时间
  - etag
    - 计算etag需要性能损耗
    - 分布式服务器存储情况下，可能计算etag算法不一致导致无法匹配
- 优先使用强缓存，协商缓存会与服务器进行一次通信
- 缓存优先级 强缓存>etag>last-modified
- max-age和expires一般会写两个，为了向下兼容。在1.1环境中，max-age优先级高于expires




- 304返回
  - from disk
  - from memory
- last-modified及If-modified-since 配合
- etag及If-none-match配合